<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="#" type="image/x-icon">
  <link rel="stylesheet" href="css/formulario03.css">

    <title>Cadastrar Evento</title>
</head>
<body>

      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="img/logo.png" alt="logo" width="200" height="50">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" 
                aria-controls="navbarContent" aria-expanded="false" aria-label="Alternar navegação">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarContent">
                <!-- Barra de Pesquisa -->
                <form class="d-flex mx-auto my-3 my-lg-0" style="max-width: 500px;">
                    <input class="form-control me-2 " type="search" placeholder="Pesquisar" aria-label="Pesquisar">
                    <button class="btn btn-outline-primary" type="submit"><i class="bi bi-search"></i></button>
                </form>
                <!-- Links de Navegação -->
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 d-flex align-items-center">
                    <li class="nav-item me-3">
                        <a class="nav-link" href="#"><i class="bi bi-person-circle me-1"></i>Entrar</a>
                    </li>
                    <li class="nav-item me-3">
                        <a class="nav-link" href="#"><i class="bi bi-person-lines-fill"></i> Cadastrar</a>
                    </li>
                    <li class="nav-item me-3">
                        <a class="nav-link" href="#"><i class="bi bi-calendar2-event-fill"></i> Cadastrar Evento</a>
                    </li>
                    <li class="nav-item me-3">
                        <a class="nav-link" href="#"><i class="bi bi-geo-alt-fill me-1"></i>Localização</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Formulário -->
    <div class="container my-5">

        <h1 class="text-center mb-4">Cadastrar Evento</h1>

                <!-- Alerta de Sucesso ou Erro (invisível inicialmente) -->
                <div class="alert alert-success d-none alert-evento" role="alert"></div>
                <div class="alert alert-danger d-none alert-evento" role="alert"></div>

        <form>
            <div class="mb-3">
                <label for="nomeEvento" class="form-label">Nome do evento</label>
                <input type="text" class="form-control" id="nomeEventoInput" placeholder="Digite o nome do evento" required>
            </div>

            <div class="mb-3">
                <label for="dataInicio" class="form-label">Data de início</label>
                <input type="text" class="form-control" id="dataInicioInput" placeholder="00/00/0000" required>
            </div>

            <div class="mb-3">
                <label for="preco" class="form-label">Preço do Ingresso</label>
                <input type="text" class="form-control" id="precoInput" placeholder="R$" required>
             </div>

             <div class="mb-3">
                <label for="descricao" class="form-label">Descrição do Evento</label>
                <input class="form-control" id="descricaoInput" rows="3" placeholder="Digite a descrição do evento" style="border-radius:10px ;" required></input>
            </div>


            <div class="mb-3">
                <label for="banner" class="form-label">URL da Logo</label>
                <div class="input-group flex-nowrap">
                    <span class="input-group-text" id="iconeLink"><i class="bi bi-link-45deg "></i></span>
                <input type="text" class="form-control" id="urlLogoInput" placeholder="Ex.: https://example.com/banner.jpg"
                    required>
                </div>
            </div>

            <div class="mb-3">
                <label for="logoPreview" class="form-label">Pré-visualização da Logo</label>
                <div id="logoPreviewContainer" class="d-flex justify-content-center">
                    <img id="logoPreview" src="https://example.com/images/logo.jpg" alt="Logo do Evento" class="img-fluid shadow-sm rounded" style="max-width: 300px; height: auto; transition: transform 0.3s ease;">
                </div>
            </div>

            <div class="mb-3 ">
                <label for="url_site " class="form-label ">URL do Site</label>
                <div class="input-group flex-nowrap">
                    <span class="input-group-text" id="iconeLink"><i class="bi bi-link-45deg "></i></span>
                    <input type="text" class="form-control " id="urlSiteInput" placeholder="Digite a URL do site do evento " required>
                </div>

                <div class="mb-3">
                    <label for="categoria" class="form-label">Categoria</label>
                    <select class="form-select" id="categoriaInput" required>
                        <option value="" selected disabled>Escolha uma categoria</option>
                        <option value="show">Show</option>
                        <option value="bazar">Bazar</option>
                        <option value="teatro">Teatro</option>
                        <option value="corrida">Corrida</option>
                    </select>
                </div>
                
            <div class="mb-3">
                <label for="organizador" class="form-label">Organizador do evento</label>
                <input type="text" class="form-control" id="organizadorInput" placeholder="Ex.: Western Productions"
                    required>
            </div>

            <div class="mb-3">
                <label for="cep" class="form-label">CEP</label>
                <input type="text" class="form-control" id="cepInput" placeholder="Digite o CEP" maxlength="9" required>
            </div>
            
            <div class="mb-3">
                <label for="estado" class="form-label">Estado</label>
                <input type="text" class="form-control" id="estadoInput" readonly required>
            </div>
            
            <div class="mb-3">
                <label for="cidade" class="form-label">Cidade</label>
                <input type="text" class="form-control" id="cidadeInput" readonly required>
            </div>
            
            <div class="mb-3">
                <label for="endereco" class="form-label">Endereço</label>
                <input type="text" class="form-control" id="enderecoInput" readonly required>
            </div>

            <div class="mb-3">
                <label for="endereco" class="form-label">Numero</label>
                <input type="text" class="form-control" id="numeroInput" placeholder="Ex.: 23" required>
            </div>

            <button type="button" class="btn cadastrarEventoBtn w-100" id="cadastrarEventoBtn" onclick="cadastrarEvento()">Cadastrar Evento</button>
        </form>
    </div>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="js/frontend03.js"></script>
    <script>

    // Função para adicionar uma mascara ao CEP
    document.querySelector('#cepInput').addEventListener('input', function (e) {
    let valor = e.target.value.replace(/\D/g, ''); // Remove caracteres não numéricos
    if (valor.length > 5) {
        valor = valor.slice(0, 5) + '-' + valor.slice(5);
    }
    e.target.value = valor;
});

     // Função para buscar o endereço com base no CEP
     async function buscarEndereco(cep) {
        try {
            // Remover todos os caracteres não numéricos do CEP
            const cepLimpo = cep.replace(/\D/g, '');
            if (cepLimpo.length !== 8) {
                alert('CEP inválido');
                return;
            }

            // Chama a API ViaCEP
            const response = await fetch(`https://viacep.com.br/ws/${cepLimpo}/json/`);
            const data = await response.json();

            // Verifica se o CEP foi encontrado
            if (data.erro) {
                alert('CEP não encontrado');
                return;
            }

            // Preenche os campos com as informações retornadas da API
            document.querySelector('#estadoInput').value = data.uf;
            document.querySelector('#cidadeInput').value = data.localidade;
            document.querySelector('#enderecoInput').value = data.logradouro;

        } catch (error) {
            console.error('Erro ao buscar o CEP:', error);
            alert('Erro ao buscar o CEP');
        }
    }

    // Ao perder o foco do campo de CEP (evento blur), fazer a busca
    document.querySelector('#cepInput').addEventListener('blur', function () {
        const cep = this.value;
        buscarEndereco(cep);
    });

    // Atualizar a imagem de pré-visualização quando a URL da logo mudar
    document.querySelector('#urlLogoInput').addEventListener('input', function() {
        const logoUrl = this.value;
        document.querySelector('#logoPreview').src = logoUrl;
    });

    </script>
    

</body>
</html>